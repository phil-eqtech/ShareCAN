<html>
<head>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
	<link rel="stylesheet" href="{{ url_for('static', filename='css/font-awesome/all.min.css') }}" />
	<script type="text/javascript" src="{{ url_for('static', filename='js/angular/angular.min.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.4.1.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/bootstrap/bootstrap.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/popper/popper.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/socketio/socket.io.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='js/main.js') }}"></script>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap/bootstrap.min.css') }}">

	<title>{{ title }}</title>
</head>
<body ng-app="autoProject">
	<nav class="navbar navbar-dark fixed-top bg-dark navbar-text ">
		<div class="row">
			<div class="col col-3 navbar-text ">
				<i class="fas fa-bars" id="menuMain" role="button" data-toggle="modal" data-target="#modalMainMenu"  title="Menu principal"></i>

				{{ title }}
			</div>
			<div class="col col-9 navbar-text  text-right">
				<i class="fas fa-server"></i>
				<i class="fas fa-cog"></i>
				<i class="fas fa-bell"></i>
				<i class="fas fa-user" role="button" id="userMenu" data-toggle="dropdown">
					<div class="dropdown-menu text-dark dropdown-menu-right" aria-labelledby="userMenu">
	          <a class="dropdown-item text-dark" href="#" ><i></i> Nouvelle analyse</a>
	          <a class="dropdown-item text-dark" href="#"><i></i> Charger une analyse</a>
	          <div class="dropdown-divider"></div>
	          <a class="dropdown-item text-dark" href="#">Something else here</a>
	        </div>
				</i>
			</div>
		</div>
	</nav>

<div ng-cloack>
	<!-- MODALS -->

	<!-- MAIN MENU MODAL -->
	<div class="modal fade" id="modalMainMenu" ng-controller="mainMenuController" tabindex="-1" role="dialog" aria-labelledby="modalMainMenuLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="modalMainMenuLabel"><i class="fas fa-bars"></i> Menu principal</h5>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body">
					<div ng-show="display == 'mainMenu'">
						<div class="text-center my-2" >
							<button class="btn btn-success" ng-click="showNewVehicleMenu()">
								<span class="fa-stack fa-2x">
		  						<i class="fas fa-car fa-opacity fa-stack-2x"></i>
		  						<i class="fas fa-square fa-stack-1x fa-pills"></i>
									<i class="fas fa-plus fa-stack-1x fa-pills-stacked fa-xs text-success"></i>
								</span>
								Analyser un nouveau véhicule
							</button>
						</div>
						<div class="text-center my-2">
							<button class="btn btn-success">
								<span class="fa-stack fa-2x">
		  						<i class="fas fa-car fa-opacity fa-stack-2x"></i>
		  						<i class="fas fa-square fa-stack-1x fa-pills"></i>
									<i class="fas fa-share fa-stack-1x fa-pills-stacked fa-xs text-success"></i>
								</span>
								<strong>Charger un véhicule</strong>
							</button>
						</div>
					</div>


					<div ng-show="display == 'vehicleOptionMenu'">
						<h3 class="modalBodyTitle">Analyser un nouveau véhicule</h3>
						<ul class="nav nav-tabs nav-fill font-weight-bold">
							<li class="nav-item clickable" ng-click="vehicleAddTab = 'auto'">
								<a class="nav-link" ng-class="{'active': vehicleAddTab == 'auto'}" >Détection automatique</a>
							</li>
							<li class="nav-item clickable" ng-click="vehicleAddTab = 'manual'">
								<a class="nav-link" ng-class="{'active': vehicleAddTab == 'manual'}" >Saisie manuelle</a>
							</li>
						</ul>
						<!-- MODAL Autodetect -->
						<div class="container border-left border-right border-bottom py-3"  ng-show="vehicleAddTab == 'auto'">
							<div class="row">
								<div class="col-6 form-group">
									<label for="mainMenuVehicleTypeAutoDetect">Type : </label>
									<select name="mainMenuVehicleTypeAutoDetect" ng-model="autoDetectType" ng-options="type for type in VEHICLE_TYPE" class="form-control">
									</select>
								</div>
								<div class="col-6 form-group">
									<label for="autoDetectButton">&nbsp:</label>
									<button name="autoDetectButton" class="btn btn-success form-control"><i class="fas fa-search"></i> Rechercher</i>
								</div>
							</div>
						</div>
						<!-- MODAL Manual entry -->
						<div class="container border-left border-right border-bottom py-3" ng-show="vehicleAddTab == 'manual'">
							<div class="row">
								<div class="col-3">
									<div class="form-group" >
										<label for="mainMenuVehicleType">Type</label>
										<select name="mainMenuVehicleType" ng-model="type" ng-options="type for type in VEHICLE_TYPE" class="form-control">
										</select>
									</div>
								</div>
								<div class="col-4">
									<div class="form-group" >
										<label for="mainMenuVehicleBrand">Marque</label>
										<select name="mainMenuVehicleBrand" ng-model="manufacturer" class="form-control" ng-disabled="!type || type.length < 2">
											<option ng-repeat="manufacturerName in brand"> %%manufacturerName %% </option>
										</select>
									</div>
								</div>
								<div class="col-5">
									<div class="form-group" >
										<label for="mainMenuVehicleBrand">Mod&egrave;le</label>
										<select name="mainMenuVehicleBrand" ng-model="model" class="form-control" ng-disabled="!brand || brand.length < 2">
											<option>C-Max</option>
											<option>Galaxy</option>
											<option>Focus</option>
											<option>Mustang</option>
										</select>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-3">
									<div class="form-group" >
										<label for="mainMenuVehicleYear">Année</label>
											<input type="text" name="mainMenuVehicleYear" class="form-control" />
									</div>
								</div>
								<div class="col-4">
									<div class="form-group" >
										<label for="mainMenuVehicleEnergy">Energie</label>
										<select name="mainMenuVehicleEnergy" class="form-control selectpicker">
											<option></option>
											<option>Diesel</option>
											<option>Electrique</option>
											<option>Essence</option>
											<option>Hybride</option>
										</select>
									</div>
								</div>
								<div class="col-5">
									<div class="form-group" >
										<label for="mainMenuVehicleMotor">Motorisation</label>
										<input type="text" name="mainMenuVehicleMotor" class="form-control" />
									</div>
								</div>
							</div>
							<div>
								<label for="mainMenuVehicleNotes">Notes</label>
								<textarea name="mainMenuVehicleNotes" class="form-control" ng-model="notes"></textarea>
							</div>
						</div>
						<hr />
						<h6 class="comment clickable" ng-click="display='mainMenu'"><i class="fas fa-chevron-left" ></i> Retour</h6>
					</div>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	        <button type="button" class="btn btn-primary">Save changes</button>
	      </div>
	    </div>
	  </div>
	</div>
	<!-- // MAIN MENU MODAL -->

  <main role="main" id="main" class="px-4 d-none">
		<div class="text-center mt-5 d-none">
			<h1><i class="fas fa-exclamation-triangle "></i></h1>
			<h3>Aucun véhicule chargé</h3>
		</div>
		<div id="">
			<h3 style="border-bottom:1px solid #e2e2e2;">
				<i class="fas fa-car"></i>
				Ford C-Max - 2015 - 1.6L HDI (WVAGZZ2234555)
				<i class="fas fa-edit"></i>
			</h3>
			<div class="bus row"> <!-- ROW A RETIRER EN PROD -->
				<div class="col col-6"><!-- A RETIRER EN PROD -->
				<!-- BUS LIST -->
				<button type="button" class="btn btn-primary">
					<i class="fas fa-network-wired"></i> CAN <span class="badge badge-light">2</span>
				</button>
				<button type="button" class="btn btn-secondary">
					<i class="fab fa-linode"></i> LIN <span class="badge badge-light">0</span>
				</button>
				<button type="button" class="btn btn-secondary">
					<i class="fab fa-kickstarter"></i>  K-Line <span class="badge badge-light">0</span>
				</button>
				<button type="button" class="btn btn-success">
					<i class="fas fa-cog"></i>  Gestion des bus
				</button>
				</div><!-- A RETIRER EN PROD -->
				<div class="col col-6 text-right "><!-- A RETIRER EN PROD -->
					<b>Debug CMD :</b>
					<button type="button" class="btn btn btn-primary" id="btnStartCAN0">Open CAN 0</button>
					&nbsp;
					<button type="button" class="btn btn btn-primary" id="btnStopCAN0">Stop CAN 0</button>
					&nbsp;
					<button type="button" class="btn btn btn-primary" id="btnSendUDS">UDS Test</button>
				</div><!-- A RETIRER EN PROD -->
			</div>
			<div class="row">
				<div class="col-md-8 flex-grow-1">
					<div class="table-responsive">
						<table class="table table-striped table-sm table-bordered table-hover clickable" id="bus0">
							<thead>
								<tr>
									<th width="">ID</th>
									<th>BUS</th>
									<th>ECU</th>
									<th width="50%">DATA</th>
									<th>ASCII</th>
									<th>TIME</th>
									<th></th>
								</tr>
							</thead>
							<tbody id="bus" style="overflow:scroll">
								<tr>
									<td>0x001</td>
									<td>CAN MS</td>
									<td></td>
									<td>0xDE 0xAD 0xBE 0xEF 0xDE 0xAD 0xBE 0xEF</td>
									<td>....</td>
									<td>1234567899</td>
									<td class="text-center"><i class="fas fa-eye"></i></td>
								</tr>
								<tr>
									<td>0x7E0</td>
									<td>CAN HS</td>
									<td>PCM</td>
									<td>0x02 0x09 0x0A</td>
									<td>....</td>
									<td>1234567899</td>
									<td class="text-center"><i class="fas fa-eye"></i></td>
								</tr>
							</tbody>
						</table>
					</div>

				</div>
				<div class="col-md-4" id="actions">
					<div class="card">
						<div class="card-header"><strong><i class="fas fa-filter"></i> FILTRER (2/2)</strong></div>
						<div class="card-body px-.5">
							<table class="table table-hover table-sm">
								<tr>
									<th>Visible</th><th>ID</th><th>Libell&eacute;</th>
								</tr>
								<tr>
									<td class="text-center"><input type="checkbox" name="a" checked /></td><td>0x0AC</td><td>Feux</td>
								</tr>
								<tr>
									<td  class="text-center"><input type="checkbox" name="b" checked /></td><td>0x7E0</td><td></td>
								</tr>
							</table>
						</div>
					</div>

					<div class="card command">
						<div class="card-header bg-command"><strong><i class="fas fa-poll-h"></i> SESSIONS (54)</strong></div>
						<div class="card-body px-.5">
							<div class="row">
								<div class="col-8">Trames : 3280</div><div class="col-4"><i class="fas fa-stop-circle"></i></div>
							</div>
						</div>
					</div>

					<div class="alert alert-success">
						<h5 class="alert-heading"><i class="fas fa-poll-h"></i> Sessions (32)</h5>
						<hr />
						<p>Trames : 3.652</p>
					</div>

					<div class="alert alert-success">
						<div class="progress">
	  					<div class="progress-bar-animated progress-bar-striped bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
						<div class="float-right clickable" title="Fermer"><i class="fas fa-times-circle"></i></div>
						<h5 class="alert-heading"><i class="fas fa-binoculars"></i> Scan UDS</h5>
						<hr />
						<div class="form-group">
							ID : <input type="text" value="700" size="5" /> - <input type="text" size="5" value="7E8" />
						</div>
					</div>

					<div class="card">
						<div class="card-header"><strong><i class="fas fa-laptop-code"></i> COMMANDES</strong></div>
						<div class="card-body px-.5">
							<button class="btn btn-secondary" type="button"><i class="fas fa-magic"></i> Analyse auto</button>
							<button class="btn btn-secondary" type="button"><i class="fas fa-binoculars"></i> Scan UDS</button>
							<button class="btn btn-secondary" type="button"><i class="fas fa-bomb"></i> Fuzzing</button>
							<hr />
							<button class="btn btn-secondary" type="button"><i class="fas fa-terminal"></i> Commandes</button>
							<button class="btn btn-secondary" type="button"><i class="fas fa-user-secret"></i> Ecoute diag</button>
							<button class="btn btn-secondary" type="button"><i class="fas fa-poll-h"></i> Sessions</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>
</div>
</div>

	</body>
</html>
